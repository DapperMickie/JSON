<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

    <title>Our superheroes</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Faster+One">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>

    </header>

    <section>

    </section>

    <script>
        var header = document.querySelector('header');
        var containerElement = document.querySelector('section');
        var requestURL = 'https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json';
        var request = new XMLHttpRequest();
        request.open('GET', requestURL);
        request.responseType = 'json';
        request.send();
        request.onload = function () {
            var superHeroes = request.response;
            populateHeader(superHeroes);
            showHeroes(superHeroes);
        }
        function populateHeader(jsonObj) {
            var myH1 = document.createElement('h1');
            myH1.textContent = jsonObj['squadName'];
            header.appendChild(myH1);

            var myPara = document.createElement('p');
            myPara.textContent = 'Hometown: ' + jsonObj['homeTown'] + ' // Formed: ' + jsonObj['formed'];
            header.appendChild(myPara);
        }
        function showHeroes(jsonObj) {
            var heroes = jsonObj['members'];

            for (var i = 0; i < heroes.length; i++) {
                // Get current hero by index, so you don't have to do heroes[i] twice in your code
                var currentHero = heroes[i];
                
                // Give elements right naming so you always understand what variable to use
                // Article element used for current hero
                var currentHeroElement = document.createElement('article');
                // H2 for the hero's name
                var heroNameElement = document.createElement('h2');
                // P for the hero's secret identity
                var secretIdentityElement = document.createElement('p');
                // P for the hero's age
                var ageElement = document.createElement('p');
                // P for the hero's super powers (just the label)
                var superPowerElement = document.createElement('p');
                // UL for the hero's super powers (list of all powers)
                var superPowerListElement = document.createElement('ul');

                // Give elements right values
                heroNameElement.textContent = currentHero.name;
                secretIdentityElement.textContent = 'Secret identity: ' + heroes[i].secretIdentity;
                ageElement.textContent = 'Age: ' + heroes[i].age;
                superPowerElement.textContent = 'Superpowers:';

                // Get superpowers of current hero 
                var superPowers = currentHero.powers;
                
                // Loop over all superpowers
                for (var j = 0; j < superPowers.length; j++) {
                    // Create li for current superpower
                    var listItemElement = document.createElement('li');
                    // Fill with right value
                    listItemElement.textContent = superPowers[j]; // You can do this now since you won't be needing this value twice
                    // Add to the list
                    superPowerListElement.appendChild(listItemElement);
                }

                // Fill current hero element
                currentHeroElement.appendChild(heroNameElement);
                currentHeroElement.appendChild(secretIdentityElement);
                currentHeroElement.appendChild(ageElement);
                currentHeroElement.appendChild(superPowerElement);
                currentHeroElement.appendChild(superPowerListElement);
                
                // Add current hero to your full (section) list of heroes
                containerElement.appendChild(currentHeroElement);
            }
        }
    </script>
</body>

</html>
